var TUNES_DIRECTORY="tunes/",MOST_RECENTLY_PLAYED="";!function(e){"use strict";function n(n){var i,t;e(".tunes-holder").append('<div class="col-md-4 col-sm-6">\n                <div class="tune-item '+(i=n.time,t=n.key,a(i.toLowerCase(),"jig")?a(t.toLowerCase(),"min")||a(t.toLowerCase(),"dor")?"tune-jig-minor":"tune-jig-major":a(i.toLowerCase(),"waltz")?a(t.toLowerCase(),"min")||a(t.toLowerCase(),"dor")?"tune-waltz-minor":"tune-waltz-major":a(t.toLowerCase(),"min")||a(t.toLowerCase(),"dor")?"tune-reel-minor":"tune-reel-major")+'">\n                    <div class="tune-background">\n                        <i class="fa fa-music"></i>\n                    </div>\n                    <div class="tune-text">\n                        <p>'+n.name+"</p>\n                        <p>"+n.time+"</p>\n                        <p>"+n.key+'</p>\n                        <i class="fa fa-play-circle-o" data-tune="'+n.audio+'"></i>\n                    </div>\n                    <div class="tune-hover">\n                        <div class="inside">\n                            <p>'+n.description+" "+n.date+'.</p>\n                            <a href="'+TUNES_DIRECTORY+n.pdf+'.pdf" target="_blank"><i class="fa fa-file-pdf-o"></i> Sheet music (.pdf)</a>\n                        </div>\n                    </div>\n                </div>\n            </div>'),e("#tunes").append("<audio id='"+n.audio+"'>\n                <source src='"+TUNES_DIRECTORY+unescape(n.audio)+".mp3'>\n            </audio>")}function a(e,n){return-1!==e.indexOf(n)}function i(n,a){var i=document.getElementById(a);if(r(i))t(i);else{var o=document.getElementById(MOST_RECENTLY_PLAYED);r(o)&&t(o),i.play(),MOST_RECENTLY_PLAYED=a,e(n).toggleClass("fa-play-circle-o fa-play-circle")}}function t(e){e.pause(),e.currentTime=0,o()}function o(){e(".fa-play-circle").each(function(){e(this).toggleClass("fa-play-circle fa-play-circle-o")})}function r(e){return null!==e&&e.duration>0&&!e.paused}window.loadTunes=function(){for(var a=JSON.parse(window.tunes)[0].tunes,t=0;t<a.length;++t)n(a[t]);e("audio").on("ended",o),e(".fa-play-circle-o").click(function(n){var a=e(n.target);i(e(this),a.data("tune"))})},window.toggleAudio=i}(jQuery);